!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function o(t,e,n,o){var r={top:0,right:10,bottom:0,left:0};c3.generate({bindto:t,padding:r,data:{x:"x",columns:[["x",2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018],o],type:"line",labels:{format:{}}},legend:{show:!1},point:{show:!0,r:function(t){return t.x==e?2.5:0}},color:{pattern:["#3580A3"]},axis:{y:{show:!1,max:n,min:0,padding:{bottom:0,top:0},tick:{count:6,values:[0,500,1e3,1500,2e3],format:d3.format(",.1f")}},x:{show:!1,padding:{right:0,left:0},tick:{count:4,values:[2e3,2006,2012,2018],multiline:!1}}},grid:{focus:{show:!1}},tooltip:{contents:function(t,e,n,o){return'<div class="chart-tooltip blue4"><span class="tooltip-label">'+t[0].x+':</span><span class="tooltip-value">'+n(t[0].value)+"</span></div>"}}})}var r=n(1);(0,function(t){return t&&t.__esModule?t:{default:t}}(r).default)({}),$.urlParam=function(t){var e=new RegExp("[?&]"+t+"=([^&#]*)").exec(window.location.href);return null!=e?e[1]||0:null};var i=$.urlParam("chart");null!=i&&($(".slide").hide(),$("#"+i).show()),"all"==i&&$(".slide").show(),function(){var t={top:20,right:60,bottom:20,left:60};c3.generate({bindto:"#chartTrend",padding:t,data:{x:"x",columns:[["x",2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018],["Rate",1173.755547,1082.244291,1097.98798,1201.689795,1261.767782,1437.152931,1671.520994,1458.945415,1253.168807,1116.653866,1063.051195,945.6703612,1036.365731,1021.105508,1008.81896,1084.803778,1104.650055,1077.504096,null]],axes:{Rate:"y",Overall:"y2"},type:"line",labels:{format:{}}},legend:{show:!1},point:{show:!0,r:function(t){return 2017==t.x?6:2.5}},color:{pattern:["#3580A3","#333333"]},axis:{y:{max:2e3,min:0,padding:{bottom:0,top:0},tick:{count:6,values:[0,500,1e3,1500,2e3],format:d3.format(",.1f")}},y2:{show:!1,max:2e4,min:0,padding:{bottom:0,top:0},tick:{count:6,values:[0,5e3,1e4,15e3,2e4],format:d3.format(",.1f")}},x:{padding:{right:0,left:0},tick:{count:4,values:[2e3,2006,2012,2018],multiline:!1}}},grid:{focus:{show:!1}},regions:[{axis:"x",start:2011,end:2016,class:"hottest"}],tooltip:{contents:function(t,e,n,o){return'<div class="chart-tooltip gray3"><span class="tooltip-label">'+t[0].x+'</span></div><div class="chart-tooltip blue4"><span class="tooltip-label">Rate:</span><span class="tooltip-value">'+n(t[0].value)+"</span></div>"}}})}(),o("#violent",2017,2e3,["Rate",1173.755547,1082.244291,1097.98798,1201.689795,1261.767782,1437.152931,1671.520994,1458.945415,1253.168807,1116.653866,1063.051195,945.6703612,1036.365731,1021.105508,1008.81896,1084.803778,1104.650055,1077.504096,null]),o("#overall",2016,2e4,["Rate",19245.04336,18978.62705,18188.39822,16800.89983,16035.30335,16765.0647,17998.04109,17192.67048,15773.16337,14428.57475,14352.36736,13524.27212,13888.19082,13601.60424,12756.24707,13377.14567,11515.83991,null,null]),o("#arson",2016,100,["Rate",70.04375121,67.98345387,69.50614058,65.39452517,63.80753138,57.51706813,63.40696446,49.48198546,40.49921693,35.94601374,31.10476818,36.09428859,30.62763083,30.67805995,28.69140449,28.12005323,20.71665333,null,null]),o("#mtv",2017,2e3,["Rate",1018.77068,1074.922996,917.951398,940.6348501,970.7112971,1017.252541,956.7750084,827.2769445,625.1746208,479.969795,492.7099833,463.0381594,488.4714456,396.8194584,378.5806508,421.8007985,478.1498838,568.6364156,null]),o("#homicide",2017,50,["Rate",13.06786403,11.24341737,12.28116018,12.03259263,14.12133891,12.1224314,14.69185762,12.11277769,10.25296631,4.913483893,10.19399965,9.539204843,10.99453415,9.976604862,7.780719862,12.1207126,8.810530727,9.763020536,null]),o("#rape",2017,200,["Rate",116.0426326,106.4202528,100.6009929,104.6312403,107.7405858,110.649427,122.9476506,122.4163703,101.2480423,107.3208324,134.874457,96.42331382,116.2279324,99.26721837,100.4199157,108.1167564,111.9175525,122.1568179,null]),o("#assault",2016,1e3,["Rate",526.6349205,452.8743927,508.7535929,503.7994219,541.3179916,637.3303827,739.7479187,664.656461,611.8457646,562.9818124,508.1316751,425.6547891,454.7025193,444.7071617,442.2852947,503.4944014,544.109803,null]),o("#burglary",2017,2e3,["Rate",1193.357343,1074.922996,1166.448916,1179.978812,1252.876569,1431.994449,1510.683816,1593.216844,1436.184256,1231.991435,1260.396573,1318.988432,1252.853343,1153.295522,1005.658042,864.4492227,817.474378,895.5785423,null]),o("#larceny",2017,4e3,["Rate",3898.143841,3812.564388,3856.545597,3231.797434,2810.40795,3361.524434,3397.169884,3415.54559,3287.613648,2946.0215,2987.103284,3195.375806,3351.238718,3315.724626,3303.401877,2940.000048,2905.57016,3132.977102,null]),o("#robbery",2017,1e3,["Rate",518.0101302,511.7062278,476.3522341,581.2265397,598.5878661,677.0506898,794.133567,659.7598062,529.8220341,441.4377371,409.8510631,414.0530534,454.4407447,467.1545226,458.3330294,461.0719073,439.812169,422.6673525,null]),d3.json("./data/rates.json",function(t,e){function n(t,e,n){for(var o=d3.scale.linear().domain([0,30]).range(["#D1E6E1","#0D4673"]),r=0;r<n.length;r++)if(t.properties.neighbor_1==n[r].neighbor_1)return o(n[r].rate)}function o(t,e,n){for(var o="",r=0,i=d3.scale.linear().domain([0,30]).range(["#D1E6E1","#0D4673"]),a=0;a<n.length;a++)t.properties.neighbor_1==n[a].neighbor_1&&(o=i(n[a].rate),r=n[a].rate);return"<div>"+t.properties.Name+"</div><div><span class='legendary' style='background-color:"+o+"'>"+d3.format(",.1f")(r)+"</span> per 10,000 police calls</div>"}var r=e.rates,i=$("#country svg");$(window).on("resize",function(){var t=i.parent().width();i.attr("width",t),i.attr("height",t/1.6)}),function(t,e,r,i,a,l,s,c,u){function d(t){var e;if(t&&p!==t){var n=v.centroid(t);n[0],n[1],e=1,p=t}else e=1,p=null;y.selectAll("path").classed("faded",!1).classed("active",p&&function(t){return t===p}),y.transition().duration(750).style("stroke-width",1.5/e+"px")}if("country"==l)var p,f=800,h=500,m=d3.geo.albersUsa().scale(1e3).translate([400,260]);else if("us"==l)var p,f=800,h=500,m=d3.geo.albersUsa().scale(2e3).translate([330,430]);else if("mn"==l)var p,f=350,h=500,m=d3.geo.albersUsa().scale(5037).translate([50,970]);else if("metro"==l)var m=d3.geo.mercator().scale([8e4]).center([-93.070335,44.930977]);var v=d3.geo.path().projection(m),g=d3.select(t+" svg").attr("width",f).attr("height",h);g.append("rect").attr("class","background").attr("width",f).attr("height",h);var y=g.append("g");d3.json("shapefiles/"+i,function(t,e){d3.json("shapefiles/us_states_topo.json",function(t,r){y.append("g").attr("class","states").selectAll("path").data(e.features).enter().append("path").attr("d",v).attr("id",function(t){return t.properties.Name.replace(new RegExp(" ","g"),"-")}).style("fill",function(t){return n(t,a,s)}).on("mousedown",function(t,e){}).style("stroke-width",".5px").style("stroke","#fff").call(d3.helper.tooltip(function(t,e){return o(t,a,s)})),y.append("path").attr("id","state-borders").attr("d",v)})}),d3.behavior.zoom().on("zoom",function(){y.attr("transform","translate("+d3.event.translate.join(",")+")scale("+d3.event.scale+")"),y.selectAll("circle").attr("d",v.projection(m)),y.selectAll("path").attr("d",v.projection(m))}),$(".zoom").click(function(){d(),$("#filter input").val(""),$("#districtName").html("Midwest"),$(".district").removeClass("selected"),$(".card, .card div").show()}),d3.helper={},d3.helper.tooltip=function(t){return function(e){var n,o=d3.select("body").node();e.on("mouseover",function(e,r){d3.select("body").selectAll("div.tooltip").remove(),n=d3.select("body").append("div").attr("class","tooltip");var i=d3.mouse(o);n.style("left",i[0]+10+"px").style("top",i[1]-15+"px").style("position","absolute").style("z-index",1001),t(e,r)}).on("mousemove",function(e,r){var i=d3.mouse(o);n.style("left",i[0]+10+"px").style("top",i[1]-15+"px");var a=t(e,r)||"";n.html(a)}).on("mouseout",function(t,e){n.remove()})}}}("#map",0,0,"minneapolis_neighborhoods.json","state","metro",r);var a=i.parent().width();i.attr("width",a),i.attr("height",a/1.6)}),d3.json("shapefiles/minneapolis_neighborhoods.json",function(t,e){d3.json("data/incidents.geojson",function(t,n){mapboxgl.accessToken="pk.eyJ1Ijoic2hhZG93ZmxhcmUiLCJhIjoiS3pwY1JTMCJ9.pTSXx_LFgR3XBpCNNxWPKA";var o=new mapboxgl.Map({container:"mapSearch",style:"mapbox://styles/shadowflare/ciqzo0bu20004bknkbrhrm6wf",center:[-93.264313,44.973269],zoom:10,minZoom:10,hash:!1});o.addControl(new mapboxgl.NavigationControl),o.scrollZoom.disable(),o.doubleClickZoom.disable(),o.on("load",function(){o.addSource("nb",{type:"geojson",data:e}),o.addLayer({id:"nb-layer",interactive:!0,source:"nb",layout:{},type:"fill",paint:{"fill-antialias":!0,"fill-opacity":.7,"fill-color":"#888888","fill-outline-color":"rgba(0, 0, 0, 1)"}},"building"),o.addSource("incidents",{type:"geojson",data:n})})})}),function(t){d3.json("data/time.json",function(e,n){var o=n.time;d3.select(t).selectAll(".row").data(o).enter().append("div").attr("class","row").on("click",function(t){}).html(function(t){var e=[];e[0]=t.h0,e[1]=t.h1,e[2]=t.h2,e[3]=t.h3,e[4]=t.h4,e[5]=t.h5,e[6]=t.h6,e[7]=t.h7,e[8]=t.h8,e[9]=t.h9,e[10]=t.h10,e[11]=t.h11,e[12]=t.h12,e[13]=t.h13,e[14]=t.h14,e[15]=t.h15,e[16]=t.h16,e[17]=t.h17,e[18]=t.h18,e[19]=t.h19,e[20]=t.h20,e[21]=t.h21,e[22]=t.h22,e[23]=t.h23;for(var n=d3.scale.linear().domain([0,2500]).range(["#D1E6E1","#0D4673"]),o="",r="",i=0;i<24;i++)r=3==i||7==i||11==i||15==i||19==i?"divide":"",o+="<div class='time "+r+"' style='background-color:"+n(e[i])+"'></div>";return"<div class='type'>"+t.community+"</div>"+o})})}("#chartTime")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(2),a=function(t){return t&&t.__esModule?t:{default:t}}(i),l=function(){function t(e){o(this,t),this.options=e||{},this.options.pym=void 0===this.options.pym||this.options.pym,this.options.useView=void 0===this.options.useView||this.options.useView,this.options.views=this.options.views||{develop:/localhost.*|127\.0\.0\.1.*/i,staging:/staging/i},this.parseQuery(),this.setView(),this.options.pym&&(this.pym=_.isUndefined(window.pym)?void 0:new pym.Child({polling:500}))}return r(t,[{key:"setView",value:function(){if(this.options.useView){var t=void 0;if(_.find(this.options.views,function(e,n){return t=n,window.location.href.match(e)?n:void 0}),t){var e=document.createElement("div"),n=document.getElementsByTagName("body")[0];e.className="site-view site-view-"+t,n.insertBefore(e,n.childNodes[0])}}}},{key:"parseQuery",value:function(){this.query=a.default.parse(document.location.search),this.query.pym&&"true"===this.query.pym&&(this.options.pym=!0)}},{key:"deepClone",value:function(t){return JSON.parse(JSON.stringify(t))}},{key:"isEmbedded",value:function(){if(!_.isUndefined(this.embedded))return this.embedded;try{this.embedded=window.self!==window.top}catch(t){this.embedded=!0}return this.embedded}},{key:"hasLocalStorage",value:function(){if(!_.isUndefined(this.localStorage))return this.localStorage;try{window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),this.localStorage=!0}catch(t){this.localStorage=!1}return this.localStorage}},{key:"hasGeolocate",value:function(){return window.navigator&&"geolocation"in window.navigator}},{key:"geolocate",value:function(t){this.hasGeolocate()?window.navigator.geolocation.getCurrentPosition(function(e){t(null,{lat:e.coords.latitude,lng:e.coords.longitude})},function(){t("Unable to find your position.")}):t("Geolocation not available")}},{key:"goTo",value:function(t){var e=_.isElement(t)?t:t[0]&&_.isElement(t[0])?t[0]:document.getElementById(t);e&&(this.isEmbedded()&&this.pym?this.pym.scrollParentToChildEl(e):e.scrollIntoView({behavior:"smooth"}))}},{key:"gaPageUpdate",value:function(t){t=t||document.location.pathname+document.location.search+document.location.hash,window.ga&&(window.ga("set","page",t),window.ga("send","pageview"))}}]),t}();e.default=function(t){return new l(t)}},function(t,e,n){"use strict";function o(t){switch(t.arrayFormat){case"index":return function(e,n,o){return null===n?[i(e,t),"[",o,"]"].join(""):[i(e,t),"[",i(o,t),"]=",i(n,t)].join("")};case"bracket":return function(e,n){return null===n?i(e,t):[i(e,t),"[]=",i(n,t)].join("")};default:return function(e,n){return null===n?i(e,t):[i(e,t),"=",i(n,t)].join("")}}}function r(t){var e;switch(t.arrayFormat){case"index":return function(t,n,o){if(e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),!e)return void(o[t]=n);void 0===o[t]&&(o[t]={}),o[t][e[1]]=n};case"bracket":return function(t,n,o){return e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0===o[t]?void(o[t]=[n]):void(o[t]=[].concat(o[t],n)):void(o[t]=n)};default:return function(t,e,n){if(void 0===n[t])return void(n[t]=e);n[t]=[].concat(n[t],e)}}}function i(t,e){return e.encode?e.strict?l(t):encodeURIComponent(t):t}function a(t){return Array.isArray(t)?t.sort():"object"==typeof t?a(Object.keys(t)).sort(function(t,e){return Number(t)-Number(e)}).map(function(e){return t[e]}):t}var l=n(3),s=n(4);e.extract=function(t){return t.split("?")[1]||""},e.parse=function(t,e){e=s({arrayFormat:"none"},e);var n=r(e),o=Object.create(null);return"string"!=typeof t?o:(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach(function(t){var e=t.replace(/\+/g," ").split("="),r=e.shift(),i=e.length>0?e.join("="):void 0;i=void 0===i?null:decodeURIComponent(i),n(decodeURIComponent(r),i,o)}),Object.keys(o).sort().reduce(function(t,e){var n=o[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=a(n):t[e]=n,t},Object.create(null))):o},e.stringify=function(t,e){e=s({encode:!0,strict:!0,arrayFormat:"none"},e);var n=o(e);return t?Object.keys(t).sort().map(function(o){var r=t[o];if(void 0===r)return"";if(null===r)return i(o,e);if(Array.isArray(r)){var a=[];return r.slice().forEach(function(t){void 0!==t&&a.push(n(o,t,a.length))}),a.join("&")}return i(o,e)+"="+i(r,e)}).filter(function(t){return t.length>0}).join("&"):""}},function(t,e,n){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},function(t,e,n){"use strict";function o(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(t){o[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,l,s=o(t),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var u in n)i.call(n,u)&&(s[u]=n[u]);if(r){l=r(n);for(var d=0;d<l.length;d++)a.call(n,l[d])&&(s[l[d]]=n[l[d]])}}return s}}]);
//# sourceMappingURL=app.bundle.js.map